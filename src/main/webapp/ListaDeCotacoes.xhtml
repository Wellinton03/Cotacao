<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta charset="UTF-8" />
	<title>Cadastro De Indicadores</title>

	<f:metadata>
		<f:viewAction action="#{cotacoesControllerBean.todasCotacoes()}" />
	</f:metadata>
	<h:outputStylesheet library="Listas" name="estilo.css" />
</h:head>

<body>

	<header>
		<h:graphicImage library="Listas" name="logo.png" />
	</header>
	<div id="conteudo">
		<h:form>

			<p:megaMenu orientation="horizontal" autoDisplay="false"
				styleClass="Menu">
				<f:facet name="start">
					<p:graphicImage name="images/primefaces-logo.svg"
						library="showcase" width="150" />
				</f:facet>
				<p:menuitem value="Quit" icon="pi pi-home"
					outcome="/CadastroDeIndicadores" />
				<p:divider layout="vertical" />
				<p:submenu label="Tabelas" icon="pi pi-database">
					<p:column>
						<p:submenu label="Indicadores">
							<p:menuitem value="Lista de Indicadores"
								outcome="/ListaDeIndicadores" />
						</p:submenu>
						<p:submenu label="Cotações">
							<p:menuitem value="Lista de Cotações" outcome="/ListaDeCotacoes" />
						</p:submenu>
					</p:column>
				</p:submenu>
				<p:submenu label="Events" icon="pi pi-fw pi-calendar">
					<p:column>
						<p:submenu label="Event 1">
							<p:menuitem value="Event 1.1" />
							<p:menuitem value="Event 1.2" />
						</p:submenu>

					</p:column>
				</p:submenu>

				<p:submenu label="Settings" icon="pi pi-fw pi-cog">
					<p:column>
						<p:submenu label="Setting 1">
							<p:menuitem value="Setting 1.1" />
							<p:menuitem value="Setting 1.2" />
						</p:submenu>
					</p:column>
				</p:submenu>
			</p:megaMenu>

			<p:growl id="messages" showDetail="true" />

			<p:toolbar>
				<p:toolbarGroup>
					<p:commandButton type="button" title="Cadastro" value="Adicionar"
						icon="pi pi-plus" styleClass="buttonAdd"
						onclick="PF('cotacaoDialogWidgetVar').show()" />
				</p:toolbarGroup>

				<p:toolbarGroup align="right">
					<h:panelGroup styleClass="search-bar">
						<i class="pi pi-fw pi-search"></i>
						<p:inputText placeholder="Faça sua busca..." />
					</h:panelGroup>
				</p:toolbarGroup>
			</p:toolbar>

			<p:dataTable value="#{cotacoesControllerBean.listaCotacoes}"
				id="idCotacoes" var="cotacoes" paginator="true" rows="5"
				paginatorPosition="bottom">
				<p:column headerText="Id" value="#{cotacoes.id} ">
				</p:column>
				<p:column headerText="Indicador" value="#{cotacoes.indicadores}">
				</p:column>
				<p:column headerText="Valor" value="#{cotacoes.valor}"
					sortBy="#{cotacoes.valor}">
				</p:column>
				<p:column headerText="Data da cotação" value="#{cotacoes.dataHora}"
					sortBy="#{cotacoes.dataHora}">
				</p:column>
				<p:column exportable="false" ariaHeaderText="Actions">
					<p:commandButton icon="pi pi-pencil"
						styleClass="edit-button rounded-button ui-button-success"
						process="@form"
						actionListener="#{cotacoesControllerBean.salvar()}">
						<f:setPropertyActionListener value="#{cotacoes}"
							target="#{cotacoesControllerBean.selectedCotacao}" />
						<p:resetInput target=":dialogs:manage-product-content" />
					</p:commandButton>

					<p:commandButton class="ui-button-warning rounded-button"
						icon="pi pi-trash"
						actionListener="#{cotacoesControllerBean.excluir()}">
						<f:setPropertyActionListener value="#{cotacoes}"
							target="#{cotacoesControllerBean.selectedCotacao}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>

			<p:dialog header="Nova Cotação" id="cotacaoDialog"
				widgetVar="cotacaoDialogWidgetVar" modal="true" resizable="false"
				closeOnEscape="true">
				<h:panelGrid columns="2" styleClass="input-modal">
					<p:outputLabel value="Nome:" for="indicador" />
					<p:selectOneMenu id="indicador" 
						value="#{cotacoesControllerBean.selectedCotacao.indicadores}"
						styleClass="menu-modal" converter="indicadoresConverter">
						<f:selectItem itemLabel="Selecione..."
							noSelectionOption="true" itemValue="#{null}" />
						<f:selectItems
							value="#{indicadoresControllerBean.listaIndicadores}"
							var="indicador" itemLabel="#{indicador.description}"
							itemValue="#{indicador}" />
					</p:selectOneMenu>



					<p:outputLabel for="dateTime" value="Data e Hora:" />
					<p:calendar id="dateTime" pattern="dd/MM/yyyy HH:mm:ss"
						showOn="button" dateOnly="true" showButtonPanel="false"
						widgetVar="datetimePicker"
						value="#{cotacoesControllerBean.selectedCotacao.dataHora}" />

					<p:outputLabel value="Valor:" for="valor" />
					<p:inputNumber id="valor"
						value="#{cotacoesControllerBean.selectedCotacao.valor}" symbol="R$" symbolPosition="p"
						decimalSeparator="," thousandSeparator="." />
					<div>
						<p:commandButton value="Salvar"
							actionListener="#{cotacoesControllerBean.salvar()}"
							styleClass="button-modal" update="@form"
							 />

					</div>
				</h:panelGrid>
			</p:dialog>
		</h:form>
	</div>

	<footer> Lista De Indicadores </footer>
</body>

</html>
